# ‚úÖ **TASK 3 ‚Äî integrate_profiles_with_stats_and_level.md**

**Task ID:** `T_INTEGRATE_PROFILES_WITH_STATS_AND_LEVEL`
**Goal:** Connect profile data to the leveling engine, stats engine, and "last word" memory so that each profile maintains its own independent progress.

---

## üìù Task Summary

Profiles should control:

* Which level the leveling engine starts at
* Which stats are displayed
* Which word index/ID the user resumes from
* Accuracy data
* Word history
* Error patterns
* Level-up history

When switching profiles:

* All these must swap seamlessly
* URL must update to reflect new profile's lastWordId

---

## üéØ Requirements

### A. Modify LevelingEngine

Add methods:

```ts
loadStateFromProfile(profile)
saveStateToProfile(profile)
```

Leveling engine must save/load:

* `currentLevel`
* `stats`
* `history`
* `difficultyPatterns`

### B. Modify GameScreen

On mount:

1. Retrieve active profile
2. Load profile's level + stats + lastWord
3. Start at the correct word

### C. On word completion:

* Update active profile's stats
* Update profile's lastWordId
* Update profile's timestamp
* Save everything to localStorage

### D. Browser back/forward must still work

URL updates should reflect:

```
/?word=<profile.lastWordId>
```

---

## üß™ Acceptance Criteria

* Switching between Sam and Emily shows different progress
* Leveling engine pulls correct level per profile
* Stats page shows profile-specific stats
* After refresh, correct profile data loads
* Word position is preserved

---

# üì¶ Deliverables

* Updated LevelingEngine
* Updated GameScreen
* Profile ‚Üí stats integration

---
